# 多重网络化对抗环境中面向角色切换的任务迁移问题

------

## 2. 问题定义与分析

### 2.1 概念介绍

#### 2.1.1 智能体模型

对抗环境下的自主无人集群由多类异构智能体组成的集合 $\mathcal{A}$ 构成,旨在协同承担各类作战任务。针对既有研究中智能体角色往往固定不变的局限,本文打破这一假设,将角色切换建模为可优化的决策变量,聚焦于依据任务需求动态切换角色,以实现"能力-任务"的最优匹配。为此,本文分别从角色表征与角色切换决策两个维度构建了智能体模型。

##### a) 智能体角色表征

对抗环境中,智能体角色界定了其在协同作战体系中的职能属性与协作贡献。本文将智能体 $a_i$ 的角色 $\xi_i$ 定义为如下二元组:

$$\xi_i = \langle e_i, g_i \rangle \tag{2-1}$$

式中:

- $e_i = {e_i^1, e_i^2, \ldots, e_i^{|e_i|}}$ 为智能体 $a_i$ 的能力特征向量,用以表征其具备的各项能力及相应水平
- $g_i$ 为职能属性向量,用以刻画智能体在协作网络中承担的具体职能(如态势感知、目标打击、信息中继等)

为定量描述智能体角色在给定时刻的整体状况,本文引入角色状态向量 $h_i(\tau)$,该向量综合反映了 $\tau$ 时刻智能体的能力状况、设备健康度等制约角色效能发挥的核心要素。进而,本文给出智能体角色与任务需求间适配程度的度量方式:

**定义 2.1 (角色-任务适配度)**:智能体 $a_i$ 的角色 $\xi_i$ 与子任务 $\tau_k$ 之间的适配程度由适配度函数 $\Phi(\xi_i, \tau_k)$ 刻画:

$$\Phi(\xi_i, \tau_k) = \Psi_\Phi\left(\frac{|e_i(\tau) \cap \mathcal{D}_k|}{|\mathcal{D}_k|}, h_i(\tau)\right) \tag{2-2}$$

式中:

- $\mathcal{D}_k$ 为子任务 $\tau_k$ 的能力需求集
- $e_i(\tau) \cap \mathcal{D}_k$ 表示智能体现有能力与任务需求的交集部分
- $\Psi_\Phi(\cdot)$ 为综合映射函数,将能力满足率与角色状态联合映射至 $[0,1]$ 区间的适配度数值
- $\Phi(\xi_i, \tau_k) = 1$ 意味着角色与任务需求完全契合
- $\Phi(\xi_i, \tau_k) = 0$ 则表明该智能体不具备执行此任务的条件

##### b) 角色切换决策与代价

在高度动态的对抗环境中,智能体通常具备多角色潜能。本文将角色切换纳入决策框架,通过定义决策变量与切换代价函数构建模型。

**定义 2.2 (角色切换决策)**:智能体 $a_i$ 的角色选取受限于其可行角色集合 $\Xi_i = {\xi_i^{(1)}, \ldots, \xi_i^{(|\Xi_i|)}}$,该集合由智能体硬件配置决定的所有潜在角色构成。在此基础上,定义角色切换决策变量 $\rho_i \in \Xi_i$ 为智能体选定的目标角色,该决策决定了智能体在 $\tau$ 时刻的角色状态:

$$\xi_i(\tau) = \rho_i, \quad \rho_i \in \Xi_i \tag{2-3}$$

角色切换并非零成本过程,通常伴随着时间或资源的损耗。为此,本文定义角色切换代价函数。

**定义 2.3 (角色切换代价)**:智能体 $a_i$ 从当前角色 $\xi_i$ 切换至目标角色 $\rho_i$ 所产生的代价由函数 $c(\xi_i, \rho_i)$ 刻画:

$$c(\xi_i, \rho_i) = \begin{cases} 0, & \rho_i = \xi_i \\ \Psi_c(\xi_i, \rho_i), & \rho_i \neq \xi_i \end{cases} \tag{2-4}$$

式中,$\Psi_c(\cdot)$ 为切换代价映射函数,用于综合量化角色切换所需的时间延迟、资源消耗及能力重构成本。

显然,角色切换决策 $\rho_i$ 将引发智能体能力特征向量 $e_i$ 与职能属性 $g_i$ 的相应变更。即当 $\rho_i \neq \xi_i$ 时,$e_i(\tau') \neq e_i(\tau)$ 且 $g_i(\tau') \neq g_i(\tau)$,从而动态重塑智能体与任务之间的适配关系。

#### 2.1.2 多重对抗网络模型

对抗环境中智能体之间维系着多元协作关联(如通信链路、感知共享、火力配合等),呈现出多层网络化结构特征。区别于既有研究中网络拓扑恒定的假设,本文关注网络层结构因智能体角色切换而动态重组的情形。

##### a) 时变多重网络架构

本文采用时变多重网络表征智能体间随时间演进的多元协作关联。$\tau$ 时刻的多重网络架构可描述为:

$$\mathcal{G}(\tau) = {G^{(1)}(\tau), G^{(2)}(\tau), \ldots, G^{(L)}(\tau)} \tag{2-5}$$

式中:

- $G^{(\ell)}(\tau)$ 为 $\tau$ 时刻第 $\ell$ 层网络的关联矩阵,$G^{(\ell)}(\tau) = {b_{ij}^{(\ell)}(\tau)}$
- $L$ 表示 $\tau$ 时刻的网络层总数

区别于静态多重网络,$L$ 并非定值,而是随网络拓扑重组动态变化。

网络层 $\ell$ 内的智能体集合记为 $A^{(\ell)}(\tau) = {a_i \mid a_i \in \ell, \tau}$,智能体 $a_i$ 隶属的网络层集合记为 $\Lambda_i(\tau) = {\ell \mid a_i \in A^{(\ell)}(\tau)}$。智能体间经由网络层执行任务迁移时,迁移代价矩阵 $W(\tau) = {\omega_{ij}(\tau)}$ 随网络结构动态调整。

##### b) 角色-结构耦合与网络拓扑重组

智能体角色的设定直接决定了其在多重网络中的层级隶属关系,因此,角色切换决策与网络结构的演变之间存在着显著的因果耦合关联。本文将这一关系建模为"角色-结构耦合"。

**定义 2.4 (角色-结构耦合)**:角色切换决策对网络拓扑演变的驱动关系可形式化描述为映射机制:

$$\Lambda_i(\tau) = \mathcal{H}_\Lambda(\rho_i) \tag{2-6}$$

式中,$\mathcal{H}_\Lambda(\cdot)$ 为角色-层级映射函数,表征了角色切换决策 $\rho_i$ 对智能体网络层隶属集合 $\Lambda_i$ 的决定作用。

具体而言,当智能体 $a_i$ 的角色切换决策 $\rho_i$ 与当前角色 $\xi_i(\tau-1)$ 不一致时,将引发其网络层隶属集合 $\Lambda_i(\tau)$ 的动态变更:

$$\rho_i \neq \xi_i(\tau-1) \Rightarrow \Lambda_i(\tau) = \mathcal{H}_\Lambda(\rho_i) \tag{2-7}$$

此种隶属集合的变更具体表现为智能体接入新的网络层或脱离原有网络层,其变化集可由集合差运算表示:

$$\begin{cases} \Lambda_i^+ = \mathcal{H}*\Lambda(\rho_i) \setminus \Lambda_i(\tau-1) & \text{(新接入的网络层)} \\ \Lambda_i^- = \Lambda_i(\tau-1) \setminus \mathcal{H}*\Lambda(\rho_i) & \text{(脱离的网络层)} \end{cases} \tag{2-8}$$

智能体层级隶属的变更将直接重塑各网络层的拓扑构型。对于任意网络层 $\ell$,其包含的智能体集合 $A^{(\ell)}$ 将根据所有智能体的角色切换决策实时更新为:

$$A^{(\ell)}(\tau) = {a_i \mid \ell \in \mathcal{H}_\Lambda(\rho_i), a_i \in \mathcal{A}} \tag{2-9}$$

**耦合效应分析**:上述耦合关联意味着角色切换决策将产生连锁效应:单一智能体的角色切换不仅改变其自身的层级隶属,还将引发相关网络层的拓扑重组,进而影响任务迁移路径与跨层桥接能力。特别地,智能体的网络层隶属集合 $\Lambda_i$ 由映射 $\mathcal{H}_\Lambda(\rho_i)$ 决定,该集合的改变将引起智能体跨层桥接能力的动态变化,进而直接制约其作为跨层任务迁移中继节点的效能。

##### c) 对抗威胁模型

对抗环境中,智能体角色不仅制约其任务执行效能,还影响其被敌方探测与毁伤的风险等级。本文拓展传统对抗威胁模型,纳入角色因素对智能体存活概率的作用:

**定义 2.5 (角色暴露风险)**:不同角色的智能体因执行任务性质、暴露特征等差异而具有差异化的被敌方探测概率,可描述为:

$$\mu_i^\xi(\tau) = \Psi_\mu(\xi_i(\tau)) \tag{2-10}$$

式中,$\Psi_\mu(\cdot)$ 为角色-风险映射函数,将角色状态映射为被探测概率。

综合考量智能体本体负荷、网络层负荷以及角色暴露风险,智能体 $a_i$ 于 $\tau$ 时刻维持正常运作的概率可描述为:

$$\pi_i(\tau) = \left(1 - \Psi_\alpha\left(\sum_{\tau_k \in \mathcal{T}(a_i)} q_k\right)\right) \times \prod_{A^{(\ell)} \in \Lambda_i(\tau)} \left(1 - \Psi_\beta\left(\frac{Q^{(\ell)}(\tau)}{|A^{(\ell)}(\tau)|}\right)\right) \times (1 - \mu_i^\xi(\tau)) \tag{2-11}$$

式中:

- $\Psi_\alpha(\cdot)$ 表征智能体本体负荷对存活概率的作用
- $\Psi_\beta(\cdot)$ 表征网络层负荷对层内智能体的连带影响
- $\mu_i^\xi(\tau)$ 为角色暴露风险

当智能体发生角色切换时,$\mu_i^\xi(\tau)$ 将随之变化,引发 $\pi_i(\tau)$ 的动态演变。

### 2.2 优化目标

本节的优化目标为:当结构-角色耦合动态性出现时,通过自适应调整角色切换与网络结构,并在稳定配置下实施任务迁移,以降低任务执行代价并提升任务达成率。

**定义 2.6 (任务执行代价)**:任务执行的总代价由任务履行代价、任务迁移代价与角色-结构调整代价三部分联合构成。本文以 $\mathcal{J}(\sigma, \rho)$ 表示在采用迁移策略 $\sigma$ 与角色切换方案 $\rho = {\rho_i}_{a_i \in \mathcal{A}}$ 条件下的综合代价函数:

$$\mathcal{J}(\sigma, \rho) = \underbrace{\sum_{\tau_k \in \mathcal{T}} q_k \cdot u_{ik}}_{\text{履行代价}} + \underbrace{\sum_{\tau_k \in \mathcal{T}} \sum_{a_i \in \mathcal{A}} \sum_{a_j \in \mathcal{A}} \omega_{ij}(\rho) \cdot z_{ijk} \cdot q_k}_{\text{迁移代价}} + \underbrace{J_{rs}(\rho)}_{\text{角色-结构调整代价}} \tag{2-12}$$

其中,角色-结构调整代价 $\mathcal{J}_{rs}(\rho)$ 专门量化由角色切换决策引发的系统性消耗,该项不仅包含个体层面的切换代价,还囊括了由拓扑演变引发的全局网络重组代价。为了准确反映动态演化过程,结构调整代价应计算当前决策结构与上一时刻结构的差异:

$$J_{rs}(\rho) = \sum_{a_i \in \mathcal{A}} c(\xi_i, \rho_i) + \kappa_G \cdot \|\mathcal{G}(\rho) - \mathcal{G}(\tau-1)\| \tag{2-13}$$

式中:

- $c(\xi_i, \rho_i)$ 为智能体 $a_i$ 的角色切换代价函数(定义见式2-4)
- $\mathcal{G}(\rho)$ 为由角色切换方案 $\rho$ 决定的实时网络拓扑结构
- $\mathcal{G}(\tau-1)$ 为上一时刻网络结构
- $|\cdot|$ 表示图结构间的差异度量范数
- $\kappa_\mathcal{G}$ 为网络结构调整的单位惩罚系数

**定义 2.7 (任务期望达成概率)**:在角色动态性与结构动态性条件下,任务被智能体成功履行的期望概率。考量角色-任务适配度与智能体存活概率,任务 $T_m$ 的期望达成概率界定为:

$$\mathcal{P}(T_m) = \prod_{\tau_k \in sub_m} \prod_{a_i \in \mathcal{A}} \left[\Psi_\mathcal{P}(\Phi(\rho_i, \tau_k) \cdot \pi_i(\tau))\right]^{x_i^k} \tag{2-14}$$

式中:

- $\Phi(\rho_i, \tau_k)$ 为角色-任务适配度
- $\pi_i(\tau)$ 为智能体正常运作概率
- $\Psi_\mathcal{P}(\cdot)$ 为单调递增凸函数

**定义 2.8 (任务期望达成比例)**:能够达成的任务的期望比例,可由下式求得:

$$\mathcal{R}(\sigma, \rho) = \frac{\sum_{T_m \in \mathcal{T}} \mathcal{P}(T_m)}{|\mathcal{T}|} \tag{2-15}$$

综合上述优化目标,最终目标函数可表述为:

$$U(\sigma, \rho) = -\lambda_1 \cdot \mathcal{J}(\sigma, \rho) + \lambda_2 \cdot \mathcal{R}(\sigma, \rho) \tag{2-16}$$

式中,$\lambda_1, \lambda_2$ 为权重系数,表征任务执行代价与任务期望达成比例在目标函数中的相对重要性;问题转化为求解最优策略 $(\sigma^*, \rho^*)$,满足最大化目标函数。

### 2.3 问题模型

基于上述分析,本文界定的多重网络化对抗环境中面向角色切换的任务迁移问题(Task Migration Oriented toward Role Switching, TM-ORS)

**定义 2.11 (面向角色切换的任务迁移问题)**:给定智能体集合 $\mathcal{A}$、可行角色集合 ${\Xi_i}*{a_i \in \mathcal{A}}$、上一时刻网络结构 $\mathcal{G}(\tau-1)$ 以及任务集合 $\mathcal{T}$,联合求解角色切换方案 $\rho = {\rho_i}*{a_i \in \mathcal{A}}$ 与任务迁移策略 $\sigma = {z_{ij}^k}$,使效用函数 $U(\sigma, \rho)$ 最大化。

TM-ORS 问题可形式化描述如下:

$$\max \quad -\lambda_1 \cdot \mathcal{J}(\sigma, \rho) + \lambda_2 \cdot \mathcal{R}(\sigma, \rho) \tag{2-17}$$

s.t.

$$\sum_{a_i \in \mathcal{A}} x_i^k(\tau) = 1, \quad \forall \tau_k \in \mathcal{T} \tag{2-18}$$

$$x_j^k(\tau) = \sum_{a_i \in \mathcal{A}} z_{ij}^k, \quad \forall a_j \in \mathcal{A}; \tau_k \in \mathcal{T} \tag{2-19}$$

$\Phi(\rho_i, \tau_k) \cdot x_i^k(\tau) \geq \eta_\Phi \cdot x_i^k(\tau), \quad \forall a_i \in \mathcal{A}; \tau_k \in \mathcal{T} \tag{2-20}$

$\omega_{ij}(\rho) < +\infty \cdot z_{ij}^k, \quad \forall a_i, a_j \in \mathcal{A}; \tau_k \in \mathcal{T} \tag{2-21}$

$\rho_i \in \Xi_i, \quad \forall a_i \in \mathcal{A} \tag{2-22}$

$\Lambda_i(\tau) = \mathcal{H}_\Lambda(\rho_i), \quad \forall a_i \in \mathcal{A} \tag{2-23}$

$x_i^k \in {0, 1}, \quad z_{ij}^k \in {0, 1}, \quad \rho_i \in \Xi_i \tag{2-24}$

**约束说明**:

- 约束(2-18)任务履行约束:确保每个子任务恰有唯一智能体承担执行
- 约束(2-19)任务流守恒约束:修正了原定义,表明任务在 $\tau$ 时刻的分配状态由迁移流 $z_{ij}^k$ 决定($z_{ij}^k = 1$ 表示任务从 $i$ 转移到 $j$,或在 $i = j$ 时保持)
- 约束(2-20)角色-任务适配约束:确保执行任务的智能体角色与任务需求的适配度不低于临界值 $\eta_\Phi$
- 约束(2-21)结构连通性约束:确保任务仅能经由连通的网络路径实施迁移,其中 $\omega_{ij}(\rho)$ 表示角色切换方案决定的网络结构下的迁移代价
- 约束(2-22)角色可行性约束:确保角色切换决策在智能体的可行角色集合内
- 约束(2-23)角色-结构映射约束:表明智能体的网络层隶属由其角色切换决策决定
- 约束(2-24)变量约束:界定决策变量的取值范围

------

## 3. 算法设计

基于上述问题分析,本文提出了一种基于跨层桥接博弈的角色切换与任务迁移联合优化方法(Role Switching and Task Migration method based on Cross-layer Bridging Game, RSTM-CBG)。该方法充分利用多重网络的层间耦合特性,将跨层桥接节点建模为博弈主体,通过计算节点在邻域局部联盟中的边际贡献来指导角色切换决策,并以博弈均衡为目标实现任务的合理分配。算法分为两个阶段:在跨层博弈角色决策阶段,识别具有跨层桥接能力的智能体,基于其在邻域联盟博弈中的Shapley值评估角色切换收益,确定最优角色配置;在结构感知任务分配阶段,根据角色切换引发的网络拓扑重构,采用桥接感知的距离度量计算迁移代价,将任务贪心分配至适配度最高的智能体。该方法以跨层桥接节点为枢纽协调角色-结构-任务三者的耦合关系,在单遍构造的框架下实现联合优化。

### 3.1 方法概述

基于跨层桥接博弈的角色切换与任务迁移联合优化方法流程如图所示,算法主要分为跨层博弈角色决策与结构感知任务分配两个阶段。

在**跨层博弈角色决策阶段**,首先计算每个智能体的跨层桥接度,识别出能够连接多个网络层的桥接节点集合;然后将角色切换决策建模为邻域局部联盟博弈问题,通过Shapley值量化每个智能体在不同角色下对邻域系统效能的边际贡献,选择使边际贡献最大化的角色作为目标角色。

在**结构感知任务分配阶段**,根据角色切换决策更新网络拓扑结构,采用桥接感知的距离度量重新计算节点间迁移代价,按任务紧迫度排序后,将任务贪心分配至角色-任务适配度最高且迁移代价最小的智能体。

### 3.2 跨层博弈角色决策算法

跨层博弈角色决策算法利用多重网络的层间耦合特性,将角色切换决策建模为邻域局部联盟博弈问题,通过计算智能体在不同角色下的边际贡献来确定最优角色配置,以最大化系统整体效能。

跨层博弈角色决策算法分为两个步骤:

1. 跨层桥接节点识别
2. 基于邻域Shapley值的角色决策

#### 3.2.1 跨层桥接节点识别

跨层桥接节点是同时隶属于多个网络层的智能体,其角色切换将引发多个网络层的拓扑重构,对系统整体效能具有关键影响。本文根据智能体在多重网络中的层级隶属情况,定义跨层桥接度来量化其桥接能力。影响跨层桥接度的因素包括如下几点:

1. **智能体隶属的网络层数量**:智能体连接的网络层越多,其作为跨层任务中转枢纽的能力越强,角色切换对网络结构的影响范围越广。
2. **智能体在各层中的连接强度**:智能体在所隶属网络层中的度中心性越高,其在该层中协调任务迁移的能力越强。
3. **智能体的角色切换潜力**:智能体可行角色集合越大,其通过角色切换适配不同任务需求的灵活性越高。

基于上述影响因素,本文提出**跨层桥接度**(Cross-layer Bridging Degree, CBD)指标,用来衡量智能体在多重网络中的桥接能力,智能体 $i$ 的跨层桥接度表示如下:

$CBD_i = |\Lambda_i| \cdot \sum_{\ell \in \Lambda_i} \frac{d_i^\ell}{\max_{j \in A_\ell} d_j^\ell} \cdot \frac{|\Xi_i|}{|\Xi|_{\max}} \tag{3-1}$

其中:

- $\Lambda_i$ 为智能体 $i$ 隶属的网络层集合,$|\Lambda_i|$ 为其大小
- $d_i^\ell$ 为智能体 $i$ 在第 $\ell$ 层的度中心性
- $\Xi_i$ 为智能体 $i$ 的可行角色集合,$|\Xi|_{\max}$ 为最大角色集规模

跨层桥接度越高的智能体,其角色切换决策对系统的影响越大,应优先进行角色优化。

**算法2-1: 跨层桥接节点识别 (CL-BNI)**

```
输入: 智能体集合 A, 多重网络 G
输出: 按跨层桥接度排序的智能体优先序列 Q

1.  Initialize: Q ← ∅
2.  for each agent i ∈ A do
3.      for each layer ℓ ∈ Λᵢ do
4.          d_i^(ℓ) ← CalculateDegreeCentrality(i, ℓ)  // 计算中心度
5.      end for
6.      CBD_i = |Λᵢ| · Σ_{ℓ∈Λᵢ} (d_i^ℓ / max_{j∈A_ℓ} d_j^ℓ) · (|Ξᵢ| / |Ξ|_max)  // 计算跨层桥接度
7.  end for
8.  Q ← Sort A by CBD_i in descending order
9.  return Q
```

#### 3.2.2 基于邻域Shapley值的角色决策

在识别跨层桥接节点后,本文将角色切换决策建模为邻域局部联盟博弈问题。考虑到智能体角色切换主要影响其在多重网络中的邻近节点,且完整Shapley值计算复杂度为指数级,本文引入 k-跳邻域约束来限定联盟范围。

**定义 2.12 (多重网络 k-跳邻域)**:智能体 $i$ 在多重网络中的 k-跳邻域定义为在任意网络层中与 $i$ 的最短路径不超过 $k$ 跳的智能体集合:

$\mathcal{N}_i^k = {j \in \mathcal{A} : \min_{\ell \in \Lambda_i \cap \Lambda_j} dist^{(\ell)}(i,j) \leq k} \tag{3-2}$

其中,$dist^{(\ell)}(i,j)$ 为智能体 $i$ 与 $j$ 在第 $\ell$ 层网络中的最短路径长度。

基于邻域约束,定义局部联盟博弈 $(\mathcal{N}_i^k, v_i)$,其中特征函数 $v_i(S)$ 表示邻域内智能体子集 $S$ 在当前角色配置下能够完成的任务价值总和。智能体 $i$ 采用角色 $\rho$ 时的邻域Shapley值表示其对邻域系统的边际贡献:

$\phi_i^\rho = \sum_{S \subseteq \mathcal{N}_i^k \setminus {i}} \frac{|S|! (|\mathcal{N}_i^k| - |S| - 1)!}{|\mathcal{N}_i^k|!} \cdot [v_i(S \cup {i} | \rho) - v_i(S)] \tag{3-3}$

其中,$v_i(S \cup {i} | \rho)$ 表示智能体 $i$ 以角色 $\rho$ 加入邻域联盟 $S$ 后的联盟价值。

本文提出**角色切换净收益**指标,综合考虑边际贡献提升与切换代价:

$\Delta_i(\rho) = \phi_i^\rho - \phi_i^\xi - c(\xi, \rho) \tag{3-4}$

智能体 $i$ 的最优目标角色为:

$\rho_i^* = \arg\max_{\rho \in \Xi_i} \Delta_i(\rho) \tag{3-5}$

当 $\Delta_i(\rho_i^*) > 0$ 时执行角色切换,否则保持当前角色。

**算法2-2: 基于邻域Shapley值的角色决策 (NSV-RD)**

```
输入: 智能体优先序列 Q, 邻域参数 k, 采样次数 M, 可行角色集合 Ξ
输出: 角色切换方案 ρ

1.  Initialize: ρ ← ∅
2.  for each agent i ∈ Q do
3.      N_i^k ← {j ∈ A : min_ℓ dist^(ℓ)(i,j) ≤ k}  // 构建k-跳邻域
4.      for each role r ∈ Ξᵢ do
5.          Initialize: φ_i^r ← 0
6.          for m = 1 to M do  // 蒙特卡洛采样
7.              perm ← GenerateRandomPermutation(N_i^k)
8.              Δv_i^perm(r) ← v_i(S_perm ∪ {i} | r) - v_i(S_perm)
9.              φ_i^r ← φ_i^r + Δv_i^perm(r)
10.         end for
11.         φ_i^r ← φ_i^r / M
12.     end for
13.     Δᵢ(r) ← φ_i^r - φ_i^ξ - c(ξ, r)
14.     r_i^* ← arg max_{r∈Ξᵢ} Δᵢ(r)  // 选择最优角色
15.     if Δᵢ(r_i^*) > 0 then
16.         ρᵢ ← r_i^*
17.         Update Network Topology G'
18.     else
19.         ρᵢ ← ξ
20.     end if
21. end for
22. return ρ
```

### 3.3 结构感知任务分配算法

在角色决策完成后,网络拓扑结构随之更新。结构感知任务分配算法根据重构后的网络结构,采用桥接感知的距离度量计算迁移代价,利用跨层桥接节点作为任务中转枢纽,将任务分配至最适合的智能体。

#### 3.3.1 桥接感知的距离度量

为了在算法层面实现"优先利用跨层桥接节点"的机制,本文提出桥接感知的多重网络距离度量。该度量通过对高桥接度节点的路径代价进行折扣,引导任务迁移流量自然汇聚到跨层枢纽上。

**定义 2.13 (桥接感知距离)**:多重网络中节点 $u$ 到节点 $v$ 的桥接感知距离定义为:

$Dist_{BA}(u,v) = \min_{path \in \mathcal{P}(u,v)} \sum_{e=(a,b) \in path} \omega_{ab} \cdot \frac{1}{1 + \gamma \cdot CBD_b} \tag{3-6}$

其中:

- $\mathcal{P}(u,v)$ 为 $u$ 到 $v$ 的所有可行路径集合
- $\omega_{ab}$ 为边 $(a,b)$ 的原始迁移代价(对应矩阵 $W$ 中的元素)
- $CBD_b$ 为路径上中间节点 $b$ 的跨层桥接度
- $\gamma \geq 0$ 为桥接偏好参数,控制对高桥接度节点的倾斜程度

该距离度量具有以下性质:

- 当 $\gamma = 0$ 时,退化为标准的最短路径距离
- 当 $\gamma > 0$ 时,经过高 CBD 节点的路径获得代价折扣,从而被优先选择

#### 3.3.2 任务分配适合度函数

在任务分配阶段,智能体接收任务的适合程度受以下因素影响:

1. **角色-任务适配度**:智能体当前角色与任务需求的匹配程度越高,执行效果越好
2. **桥接感知迁移代价**:任务从当前位置经由桥接节点迁移至目标智能体的代价越小,迁移效率越高
3. **负载均衡性**:智能体当前负载越低,接收新任务的能力越强

考虑上述因素,本文提出**任务分配适合度函数**:

$F_{i,\tau_k} = \omega_1 \cdot \Phi(\rho_i, \tau_k) + \omega_2 \cdot \frac{1}{1 + Dist_{BA}(loc(\tau_k), i)} + \omega_3 \cdot \left(1 - \frac{L_i}{L_{\max}}\right) \tag{3-7}$

其中:

- $\Phi(\rho_i, \tau_k)$ 为角色-任务适配度
- $Dist_{BA}(loc(\tau_k), i)$ 为任务 $\tau_k$ 当前位置到智能体 $i$ 的桥接感知距离
- $loc(\tau_k)$ 为任务 $\tau_k$ 的当前所在位置
- $\omega_1, \omega_2, \omega_3$ 为权重参数,满足 $\omega_1 + \omega_2 + \omega_3 = 1$

**算法2-3: 结构感知任务分配 (SA-TA)**

```
输入: 角色切换方案 ρ, 任务集合 T, 更新后的多重网络 G', 参数 γ
输出: 任务分配方案 σ

1.  Update topology of G' based on ρ
2.  for each agent i ∈ A do
3.      Recalculate CBD_i  // 根据新拓扑更新跨层桥接度
4.  end for
5.  Calculate Dist_BA for all node pairs  // 计算桥接感知距离
6.  T_sorted ← Sort T by urgency in descending order
7.  for each task τ_k ∈ T_sorted do
8.      i^* ← null, F_max ← -∞
9.      for each agent i ∈ A do
10.         if Φ(ρᵢ, τ_k) ≥ η_Φ then  // 满足适配度阈值约束
11.             F_val ← ω₁·Φ(ρᵢ,τ_k) + ω₂/(1+Dist_BA(loc(τ_k),i)) + ω₃·(1-Lᵢ/L_max)
12.             if F_val > F_max then
13.                 F_max ← F_val, i^* ← i
14.             end if
15.         end if
16.     end for
17.     σ(τ_k) ← i^*
18.     L_{i^*} ← L_{i^*} + q_k  // 更新智能体负载
19. end for
20. return σ
```

