## 节点失效

## 3.2.1 概念介绍

### （1）节点失效与级联传播模型

在对抗环境中，智能体不仅面临第二章所述的系统内生性风险，还因其跨层枢纽地位而暴露于敌方定向打击等外生威胁之下。节点失效将直接导致任务迁移路径中断，进而引发多重网络的层间级联失效。为此，本节在第二章正常工作概率模型的基础上，引入多重度中心性暴露风险因素，并建立节点死亡判定机制，以刻画对抗场景中节点失效的动态演化过程。

#### a）暴露风险与存活概率

在多重网络协同体系中，高多重度中心性的节点承担着跨层信息汇聚与任务中转的关键职能。从对抗博弈视角审视，此类节点战术价值高，极易被敌方识别并列为优先打击目标。为量化这一特征，本节定义多重度中心性暴露风险，并在此基础上构建节点的综合失效概率模型。

**定义 3.1. 多重度中心性暴露风险：**智能体 $a_i$ 的多重度中心性 $d_i^{M}(\tau)$ 定义为其在各网络层度中心性的加权聚合：

$$d_i^{M}(\tau) = \sum_{\ell \in \Lambda_i(\tau)} \beta^{(\ell)} \cdot d_i^{(\ell)}(\tau)$$

其中，$d_i^{(\ell)}(\tau)$ 表示智能体 $a_i$ 在第 $\ell$ 层网络中的度中心性；$\beta^{(\ell)}$ 为第 $\ell$ 层网络的暴露敏感度权重，用以刻画不同网络层在对抗态势下的暴露程度差异。

基于多重度中心性，智能体 $a_i$ 因枢纽特征而遭受敌方探测与打击的暴露风险 $\mu_i^{M}(\tau)$ 定义为：

$$\mu_i^{M}(\tau) = \alpha_{risk} \cdot \left( \frac{d_i^{M}(\tau)}{d_{max}^{M}(\tau)} \right)^\eta$$

式中，$d_{\max}^{M}(\tau)$ 为当前时刻全网的最大多重度中心性，$\alpha_{risk} \in (0, 1]$ 为最大风险上限系数，$\eta$ 为风险增长指数。

结合第二章式 (2-11) 定义的正常工作概率 $\pi_i(\tau)$ ，智能体 $a_i$ 在 $\tau$ 时刻考虑外生打击后的综合失效概率 $p_i^{\text{fail}}(\tau)$ 定义为：

$$p_i^{\text{fail}}(\tau) = 1 - \pi_i(\tau) \cdot \left(1 - \mu_i^{M}(\tau)\right)$$

#### b）蒙特卡洛随机致死机制

为模拟战场环境的不确定性与动态性，本文采用蒙特卡洛随机采样机制判定节点的物理存亡状态。

**定义 3.2. 节点物理死亡：**设 $\varepsilon_i(\tau)$ 为服从区间 $[0, 1]$ 均匀分布的随机变量，即 $\varepsilon_i(\tau) \sim U(0, 1)$。智能体 $a_i$ 在 $\tau$ 时刻的物理存亡状态 $s_i^{phy}(\tau) \in \{0, 1\}$ 判定规则如下：

$$s_i^{phy}(\tau) = \begin{cases} 0 \ (\text{物理死亡}), & \text{若 } \varepsilon_i(\tau) < p_i^{\text{fail}}(\tau) \text{ 或 } s_i^{phy}(\tau-1) = 0 \\ 1 \ (\text{物理存活}), & \text{其他情况} \end{cases}$$

该机制表明，失效概率越高，随机采样落在失效区间的可能性越大。同时，引入状态继承约束 $s_i^{phy}(\tau-1) = 0$，确保了物理毁伤的不可逆性。

#### c）拓扑级联失效与任务中断

物理节点的死亡将触发多重网络拓扑的即时收缩。若失效节点是连接不同网络组件的关键节点，其移除将导致网络分裂，使得部分物理存活的节点因丧失与主集群的通信路径而陷入功能性失效，即发生级联失效。

**定义 3.3. 级联功能失效：**在物理失效节点移除后，更新后的网络拓扑记为 $\mathcal{G}'(\tau)$。计算 $\mathcal{G}'(\tau)$ 中的最大连通分量，记为 $\mathcal{C}_{main}(\tau)$。定义智能体 $a_i$ 的功能状态 $s_i^{func}(\tau)$ 为：

$$s_i^{func}(\tau) = \begin{cases} 1 \ (\text{有效}), & \text{若 } a_i \in \mathcal{C}_{main}(\tau) \\ 0 \ (\text{失效}), & \text{若 } s_i^{phy}(\tau)=0 \text{ 或 } a_i \notin \mathcal{C}_{main}(\tau) \end{cases}$$

此处，$a_i \notin \mathcal{C}_{main}(\tau)$ 但 $s_i^{phy}(\tau)=1$ 的节点即为孤岛节点。尽管其硬件完好，但因无法进行协同交互，被视为功能性失效。

节点的功能性失效直接导致其承载的任务被迫中断。对于任意任务 $\tau_k$，若其当前执行节点 $a_i$ 满足 $s_i^{func}(\tau) = 0$，则该任务被标记为中断任务。此类中断任务连同失效节点的待处理任务队列，共同构成待迁移任务集合 $\mathcal{T}_{mig}(\tau)$。

### （2）角色补位机制

#### a) 补位资格与候选集筛选

在节点失效导致网络分割后，系统需筛选存活节点以执行角色补位，旨在通过接入失效节点原有的网络层来恢复连通性。本节首先量化失效节点引发的角色需求，进而建立存活节点的补位资格判定模型。

设 $\tau$ 时刻的失效节点集合为 $\mathcal{A}^{fail}(\tau) = \{a_i \mid s_i^{func}(\tau) = 0\}$。对于任意失效节点 $a_i$，其失效导致原有层间连接断裂，定义相应的目标角色需求如下。

定义 3.4. 目标角色需求集：失效节点 $a_i$ 的目标角色需求集 $\Xi_i^{req}$ 定义为所有能够接入其失效前所属网络层的角色集合：

$$\Xi_i^{req} = \left\{\xi \in \Xi_{all} \mid \mathcal{H}_\Lambda(\xi) \cap \Lambda_i(\tau-1) \neq \emptyset \right\}$$

式中，$\Xi_{all}$ 为全系统可行角色集；$\mathcal{H}_\Lambda(\xi)$ 为角色 $\xi$ 对应的网络层隶属集合 ；$\Lambda_i(\tau-1)$ 为节点 $a_i$ 失效前隶属的网络层集合。该集合筛选出具备接入失效节点原有网络层能力的所有潜在角色，构成了补位的必要条件。

基于此需求集，定义存活节点的补位资格。

定义 3.5. 补位资格判定：智能体 $a_j$ 对失效节点 $a_i$ 具备补位资格，当且仅当补位资格判定函数值 $\mathcal{Q}_{j \rightarrow i}(\tau) = 1$：

$$\mathcal{Q}_{j \rightarrow i}(\tau) = \mathbb{1}\left[s_j^{func}(\tau) = 1\right] \cdot \mathbb{1}\left[\Xi_j \cap \Xi_i^{req} \neq \emptyset\right]$$

式中，第一项为**功能有效性约束**，要求补位候选者物理存活且位于主连通分量内（参见定义 3.3）；第二项为**角色可行性约束**，要求候选者的可行角色集合 $\Xi_j$ 2 与目标角色需求集 $\Xi_i^{req}$ 存在非空交集。该约束确保候选节点在物理硬件上具备切换至目标需求角色的潜能。

综合上述定义，失效节点 $a_i$ 的**补位候选集**形式化表示为：

$$\mathcal{C}_i^{cand}(\tau) = \left\{a_j \in \mathcal{A} \mid \mathcal{Q}_{j \rightarrow i}(\tau) = 1\right\}$$

#### b）拓扑重构与连通恢复

补位操作通过智能体的角色切换引发网络拓扑的局部更新。基于定义 2.4 角色-结构耦合机制进行拓展，补位节点 $a_j$ 切换至目标角色 $\rho_j^{rep}$ 后，将接入失效节点 $a_i$ 原本所属的网络层集合，从而在拓扑结构上实质性接替其枢纽地位。

补位节点将完全继承失效节点的跨层桥接功能，即满足新层级隶属集合覆盖原集合：

$$\mathcal{H}_\Lambda(\rho_j^{rep}) \supseteq \Lambda_i(\tau-1)$$

此时，补位节点 $a_j$ 将替代失效节点 $a_i$，在各层网络中与原邻居集合中的存活节点建立物理连接，完成对局部拓扑结构的重构。

定义 3.6. 补位角色切换代价： 补位节点 $a_j$ 执行角色切换的代价不仅包含能力重构的基础切换代价，还与拓扑重构时需建立的通信链路数量正相关。定义补位角色切换代价 $c^{rep}(a_j, a_i)$ 为：

$$c^{rep}(a_j, a_i) = c(\xi_j, \rho_j^{rep}) + \kappa_{link} \cdot \sum_{\ell \in \Lambda_i(\tau-1)} \left| \mathcal{N}_i^{(\ell)}(\tau-1) \cap \{a_k \mid s_k^{phy}(\tau) = 1\} \right|$$

式中，$c(\xi_j, \rho_j^{rep})$ 为定义 2.3 中的基础角色切换代价；$\kappa_{link}$ 为单位连接建立代价系数；求和项表示补位节点需在各网络层中与失效节点原存活邻居建立连接的总数量。该定义表明，失效节点的原邻居越多，补位重构的通信开销与同步代价越高。

推论 3.1. 孤岛连通性恢复： 基于连通职能接替机制，原失效节点 $a_i$ 作为连接主连通分量 $\mathcal{C}_{main}(\tau)$ 与孤岛区域 $\mathcal{C}_{iso}^{(i)}(\tau)$ 的割点，其位置现由补位节点 $a_j$ 填补，孤岛区域被重新纳入系统的主连通分量：

$$\mathcal{C}_{main}'(\tau) = \mathcal{C}_{main}(\tau) \cup \mathcal{C}_{iso}^{(i)}(\tau)$$

此时，随着物理路径的可达性恢复，孤岛区域内的存活节点自动恢复功能有效状态，即 $s_k^{func}(\tau) \rightarrow 1, \forall a_k \in \mathcal{C}_{iso}^{(i)}(\tau)$。

## 3.2.2 优化目标

本节的优化目标为：当节点失效导致网络分割与任务中断时，通过补位机制恢复网络连通性，并在韧性约束下实施任务迁移，以最小化系统代价并最大化任务达成率。

**定义 3.7. 韧性任务执行代价：** 在节点失效场景下，任务执行的总代价由任务履行代价、任务迁移代价与补位重构代价三部分联合构成。本文以 $\mathcal{J}(\sigma, \rho^{rep})$ 表示在采用迁移策略 $\sigma$ 与补位方案 $\rho^{rep}$ 条件下的综合代价函数：

$$\mathcal{J}(\sigma, \rho^{rep}) = \underbrace{\sum_{\tau_k \in \mathcal{T}} q_k \cdot u_{ik}}_{\text{履行代价}} + \underbrace{\sum_{\tau_k \in \mathcal{T}} \sum_{a_i \in \mathcal{A}} \sum_{a_j \in \mathcal{A}} \omega_{ij}(\mathcal{G}_{rec}) \cdot z_{ij}^k \cdot q_k}_{\text{迁移代价}} + \underbrace{\mathcal{J}^{rep}(\rho^{rep})}_{\text{补位重构代价}}$$

其中，**$\omega_{ij}(\mathcal{G}_{rec})$ 表示在补位重构后的网络拓扑 $\mathcal{G}_{rec}$ 下的迁移单位代价**。补位重构代价 $\mathcal{J}^{rep}(\rho^{rep})$ 专门量化由补位操作引发的系统性消耗：

$$\mathcal{J}^{rep}(\rho^{rep}) = \sum_{a_j \in \mathcal{A}^{rep}} c^{rep}(a_j, a_{i_j})$$

式中，$\mathcal{A}^{rep}$ 为执行补位操作的节点集合；$a_{i_j}$ 为节点 $a_j$ 所补位的失效节点；$c^{rep}(a_j, a_{i_j})$ 为定义 3.7 中的补位角色切换代价。

**定义 3.8. 韧性任务期望达成概率：** 在节点失效与补位恢复条件下，任务被智能体成功履行的期望概率。考量角色-任务适配度、智能体存活概率与路径连通可靠性，任务 $T_m$ 的韧性期望达成概率定义为：

$$\mathcal{P}(T_m) = \prod_{\tau_k \in Sub_m} \prod_{a_i \in \mathcal{A}} \left[\Psi_{\mathcal{P}}\left(\Phi(\rho_i, \tau_k) \cdot (1 - p_i^{fail}(\tau)) \cdot \mathcal{R}_{path}^k\right)\right]^{x_i^k}$$

式中，$\Phi(\rho_i, \tau_k)$ 为角色-任务适配度；$(1 - p_i^{fail}(\tau))$ 为智能体存活概率；**$\mathcal{R}_{path}^k$ 为任务 $\tau_k$ 迁移路径的连通可靠性，其值取决于路径上所有中间节点的联合存活概率**；$\Psi_{\mathcal{P}}(\cdot)$ 为单调递增凸函数。

**定义 3.9. 韧性任务期望达成比例：** 能够达成的任务的期望比例，可由下式求得：

$$\mathcal{R}(\sigma, \rho^{rep}) = \frac{\sum_{T_m \in \mathcal{T}} \mathcal{P}^{res}(T_m)}{|\mathcal{T}|}$$

综合上述优化目标，最终目标函数可表述为：

$$U(\sigma, \rho^{rep}) = -\lambda_1 \cdot \mathcal{J}(\sigma, \rho^{rep}) + \lambda_2 \cdot \mathcal{R}(\sigma, \rho^{rep})$$

式中，$\lambda_1, \lambda_2$ 为权重系数，表征韧性任务执行代价与任务期望达成比例在目标函数中的相对重要性；问题转化为求解最优策略 $(\sigma^*, \rho^{rep*})$，满足最大化目标函数。

## 3.2.3 问题模型

基于上述分析，本文界定的多重网络化对抗环境中面向节点失效的韧性任务迁移问题（Resilient Task Migration Oriented toward Node Failure，RTM-ONF）。

**定义 3.10. 面向节点失效的韧性任务迁移问题**：给定智能体集合 $\mathcal{A}$、初始网络结构 $\mathcal{G}(\tau)$ 与任务集合 $\mathcal{T}$。在网络拓扑随节点失效动态演化的过程中，基于实时更新的失效节点集合 $\mathcal{A}^{fail}(\tau)$ 与待迁移任务集合 $\mathcal{T}_{mig}(\tau)$，联合求解补位方案 $\rho^{rep} = \{\rho_j^{rep}\}_{a_j \in \mathcal{A}^{rep}}$ 与任务迁移策略 $\sigma = \{z_{ij}^k\}$，使效用函数 $U(\sigma, \rho^{rep})$ 最大化。

RTM-ONF 问题可形式化描述如下：

$$\max \quad -\lambda_1 \cdot \mathcal{J}(\sigma, \rho^{rep}) + \lambda_2 \cdot \mathcal{R}(\sigma, \rho^{rep}) \tag{RTM-ONF}$$

$$\text{s.t.} \quad \sum_{a_i \in \mathcal{A}} x_i^k(\tau) = 1, \quad \forall \tau_k \in \mathcal{T} \tag{3-1}$$

$$x_j^k(\tau) = \sum_{a_i \in \mathcal{A}} z_{ij}^k, \quad \forall a_j \in \mathcal{A}; \tau_k \in \mathcal{T} \tag{3-2}$$

$$\Phi(\rho_i, \tau_k) \cdot x_i^k(\tau) \geq \eta_\Phi \cdot x_i^k(\tau), \quad \forall a_i \in \mathcal{A}; \tau_k \in \mathcal{T} \tag{3-3}$$

$$s_i^{func}(\tau) \cdot x_i^k(\tau) = x_i^k(\tau), \quad \forall a_i \in \mathcal{A}; \tau_k \in \mathcal{T} \tag{3-4}$$

$$\mathcal{Q}_{j \rightarrow i}(\tau) = 1, \quad \forall a_j \in \mathcal{A}^{rep}, a_i \in \mathcal{A}^{fail}(\tau) \tag{3-5}$$

$$\mathcal{H}_\Lambda(\rho_j^{rep}) \supseteq \Lambda_i(\tau-1), \quad \forall a_j \in \mathcal{A}^{rep} \tag{3-6}$$

$$x_i^k \in {0,1}, \quad z_{ij}^k \in {0,1}, \quad \rho_j^{rep} \in \Xi_j \tag{3-7}$$

约束（3-1）**任务履行约束**：确保每个子任务恰有唯一智能体承担执行；约束（3-2）**任务流守恒约束**：表明任务在 $\tau$ 时刻的分配状态由迁移流 $z_{ij}^k$ 决定；约束（3-3）**角色-任务适配约束**：确保执行任务的智能体角色与任务需求的适配度不低于临界值 $\eta_\Phi$；约束（3-4）**功能有效性约束**：确保任务仅能分配给功能有效的存活节点执行；约束（3-5）**补位资格约束**：确保补位节点满足定义 3.5 中的补位资格判定条件；约束（3-6）**连通职能接替约束**：确保补位节点能够完全继承失效节点的跨层桥接功能；约束（3-7）**变量约束**：界定决策变量的取值范围。

与 TM-ORS 问题基于需求驱动的**主动效能优化**不同，RTM-ONF 问题是由节点失效触发的**被动韧性恢复**过程。其决策重心从权衡切换代价与适配收益转向在路径风险约束下平衡补位重构代价与连通性收益。此外，RTM-ONF 新增了功能有效性与拓扑继承约束，并采用与连接建立数量显式相关的**补位重构代价**替代通用结构调整代价，从而更精准地刻画对抗环境下的修复开销。

## 3.3 算法设计

基于上述问题分析，本文提出了一种基于风险势能场的韧性任务迁移算法（Resilient Task Migration based on Risk Potential Field，RTM-RPF）。该算法采用拓扑修复与任务迁移解耦的构造策略，利用势能场理论将节点失效概率映射为势能地形，引导任务流向低风险的安全节点。算法分为两个阶段：在基于风险-代价比的角色补位阶段，构建包含风险惩罚因子的补位效能评估模型，实现补位决策的风险感知优化，规避节点的二次失效；在基于风险势能场的任务迁移阶段，利用势能梯度特性引导任务沿低风险路径迁移，同时通过预测负载机制防止任务过度集中引发的级联失效。该算法通过势能场的非线性惩罚机制实现对濒危节点的强制规避，在保障迁移路径安全性的同时兼顾系统负载均衡，有效提升了系统应对失效-负载耦合风险的韧性。

### 3.3.1 方法概述

基于风险势能场的韧性任务迁移算法流程如图3-1所示，算法主要分为基于风险-代价比的角色补位与基于风险势能场的韧性任务迁移两个阶段。在基于风险-代价比的角色补位阶段，首先计算每个失效节点的失效影响度，识别对系统连通性影响最大的关键失效节点；然后基于补位效能比指标为每个失效节点选择最优补位者，在恢复连通性的同时规避高风险节点成为新枢纽。在基于风险势能场的韧性任务迁移阶段，首先将节点失效概率映射为势能场，构建风险势能距离矩阵；然后根据韧性适配度函数将中断任务分配至最优执行节点，通过预测负载机制防止任务过度集中。

### 3.3.2 基于风险-代价比的角色补位算法

基于风险-代价比的角色补位算法针对节点失效导致的网络分割问题，通过识别关键失效节点并选择最优补位者执行角色切换，恢复孤岛区域与主连通分量的连接。该算法在补位决策时综合考虑连通性恢复收益与补位执行风险，避免将高暴露风险的节点选为新的网络枢纽，从而防止二次失效的发生。

基于风险-代价比的角色补位算法分为两个步骤：（1）失效影响度计算与排序；（2）基于补位效能比的贪心决策。

#### （1）失效影响度计算与排序

当多个节点同时失效时，不同失效节点对系统连通性的破坏程度存在显著差异。为合理分配有限的补位资源，需要量化每个失效节点的影响程度，优先修复对系统影响最大的失效。本文定义失效影响度指标来衡量失效节点对网络连通性与任务执行的综合影响。

**定义 3.11. 失效影响度**：失效节点 $a_i$ 对系统的综合影响程度由失效影响度 $FID_i$ 刻画：

$$FID_i = |\mathcal{C}_{iso}^{(i)}| \cdot \left(1 + \kappa_{task} \cdot \frac{|\mathcal{T}_i^{int}|}{|\mathcal{T}|}\right) \tag{3-8}$$

式中，$|\mathcal{C}_{iso}^{(i)}|$ 为节点 $a_i$ 失效导致的孤岛区域所包含的节点数量；$|\mathcal{T}_i^{int}|$ 为因节点 $a_i$ 失效而中断的任务数量，包括该节点承载的任务及孤岛区域内所有节点承载的任务；$|\mathcal{T}|$ 为系统任务总数；$\kappa_{task}$ 为任务影响权重系数。

失效影响度综合反映了失效节点在拓扑维度与业务维度的双重影响：拓扑维度上，孤岛规模越大表明该节点的结构枢纽作用越强；业务维度上，中断任务比例越高表明该节点的任务承载价值越大。通过该指标对失效节点进行降序排列，可确保补位资源优先投入到影响最严重的区域。

------

#### （2）基于补位效能比的贪心决策

在确定失效节点的修复优先级后，需要为每个失效节点选择最优的补位者。根据定义 3.5 中的补位资格判定函数 $\mathcal{Q}_{j \to i}(\tau)$，可筛选出满足功能有效性与角色可行性的候选节点集合。在此基础上，补位决策面临收益与风险的权衡：一方面，补位操作能够恢复孤岛区域的连通性；另一方面，补位操作本身产生代价，且若选择高暴露风险的节点作为新枢纽，可能导致该节点在后续时段失效，引发二次网络分割。为此，本文提出补位效能比指标，综合量化补位操作的净收益。

**定义 3.12. 补位效能比**：存活节点 $a_j$ 对失效节点 $a_i$ 执行补位的效能比 $RER_{j \to i}$ 定义为：

$$RER_{j \to i} = \frac{|\mathcal{C}_{iso}^{(i)}| \cdot \left(1 - \frac{L_j(\tau)}{L_{max}}\right)}{c^{rep}(a_j, a_i) \cdot \left(1 + \alpha_{risk} \cdot \mu_j^{M}(\tau)\right)} \tag{3-9}$$

式中，分子项表征补位操作的预期净收益，其中 $(1 - L_j(\tau)/L_{max})$ 为负载余量因子，确保补位节点具备充足的资源承载能力；分母项表征风险调整代价，由补位代价 $c^{rep}$ 与风险惩罚因子 $(1 + \alpha_{risk} \cdot \mu_j^{M}(\tau))$ 构成。

风险惩罚因子的设计确保了高暴露风险的节点在补位决策中受到抑制：当 $\mu_j^{M}(\tau) = 0$ 时，惩罚因子为 1，无额外惩罚；当 $\mu_j^{M}(\tau)$ 较大时，惩罚因子增大，导致效能比降低，从而降低该节点被选为补位者的优先级。这一机制有效避免了将濒危节点置于网络枢纽位置的风险。

对于每个失效节点 $a_i$，算法基于定义 3.5 构建候选集 $\mathcal{C}_i^{cand}(\tau)$，并从中选择效能比最大的节点作为最优补位者：

$$a_j^* = \underset{a_j \in \mathcal{C}_i^{cand}(\tau)}{\arg\max} \ RER_{j \to i} \tag{3-10}$$

为避免补位收益过低导致的资源浪费，引入效能比阈值 $\eta_{RER}$。仅当 $RER_{j^* \to i} \geq \eta_{RER}$ 时，才执行补位操作；否则，该失效节点标记为不可恢复，其承载的任务纳入待迁移任务集合。补位成功后，系统执行角色切换、拓扑重构与孤岛状态恢复，并实时更新候选节点池。

基于补位效能比的贪心决策具体流程如算法 3-1 所示。

------

**算法 3-1**：$Greedy\ Decision\ based\ on\ Replenishment\ Efficiency\ Ratio\ (GD$-$RER)$

------

**输入**：失效节点序列 $\mathcal{Q}^{fail}$，智能体集合 $\mathcal{A}$，多重网络 $\mathcal{G}(\tau)$，参数 $\alpha_{risk}$，$\eta_{RER}$

**输出**：补位方案 $\rho^{rep}$，重构后网络 $\mathcal{G}_{rec}$

------

1. **Initialize**: $\rho^{rep} \leftarrow \emptyset$, $\mathcal{A}^{available} \leftarrow \{a_j \in \mathcal{A} \mid s_j^{func}(\tau) = 1\}$
2. $\mathcal{Q}^{fail} \leftarrow$ Sort $\mathcal{A}^{fail}(\tau)$ by $FID_i$ in descending order
3. **for each** failed node $a_i \in \mathcal{Q}^{fail}$ **do**
4. $\quad$ // 基于定义 3.5 构建补位候选集
5. $\quad$ $\mathcal{C}_i^{cand} \leftarrow \{a_j \in \mathcal{A}^{available} \mid \mathcal{Q}_{j \to i}(\tau) = 1\}$
6. $\quad$ **if** $\mathcal{C}_i^{cand} = \emptyset$ **then**
7. $\quad\quad$ MarkAsUnrecoverable$(a_i)$
8. $\quad\quad$ **continue**
9. $\quad$ **end if**
10. $\quad$ // 计算各候选节点的补位效能比
11. $\quad$ **for each** candidate $a_j \in \mathcal{C}_i^{cand}$ **do**
12. $\quad\quad$ $\rho_j^{rep} \leftarrow$ SelectOptimalRole$(a_j, \Lambda_i(\tau-1))$
13. $\quad\quad$ $c^{rep}(a_j, a_i) \leftarrow$ CalculateReplenishmentCost$(a_j, a_i, \rho_j^{rep})$
14. $\quad\quad$ $RER_{j \to i} \leftarrow \frac{|\mathcal{C}_{iso}^{(i)}| \cdot (1 - L_j/L_{max})}{c^{rep}(a_j, a_i) \cdot (1 + \alpha_{risk} \cdot \mu_j^{M})}$
15. $\quad$ **end for**
16. $\quad$ // 贪心选择最优补位节点
17. $\quad$ $a_j^* \leftarrow \arg\max_{a_j \in \mathcal{C}_i^{cand}} RER_{j \to i}$
18. $\quad$ **if** $RER_{j^* \to i} \geq \eta_{RER}$ **then**
19. $\quad\quad$ $\rho^{rep} \leftarrow \rho^{rep} \cup \{(a_j^*, \rho_{j^*}^{rep})\}$
20. $\quad\quad$ UpdateNetworkTopology$(\mathcal{G}(\tau), a_j^*, a_i)$ // 执行拓扑重构
21. $\quad\quad$ RecoverIsolatedNodes$(\mathcal{C}_{iso}^{(i)})$ // 恢复孤岛节点状态
22. $\quad\quad$ $\mathcal{A}^{available} \leftarrow \mathcal{A}^{available} \setminus \{a_j^*\}$ // 更新候选池
23. $\quad$ **else**
24. $\quad\quad$ MarkAsUnrecoverable$(a_i)$
25. $\quad$ **end if**
26. **end for**
27. $\mathcal{G}_{rec} \leftarrow$ GetReconstructedNetwork$(\mathcal{G}(\tau))$
28. **return** $\rho^{rep}$, $\mathcal{G}_{rec}$

### 3.3.3 基于风险势能场的韧性任务迁移算法

在通过角色补位恢复网络连通性后，系统面临将任务安全迁移至存活节点的挑战。传统方法通常以物理距离或通信代价最小化为目标，忽视了对抗环境下节点失效的动态风险，易导致任务流向高危区域而引发级联失效。针对这一问题，本文提出基于风险势能场的韧性任务迁移算法。该算法利用势能场理论构建风险感知的度量空间，通过非线性映射将高风险区域转化为高势能壁垒，从而引导任务自适应规避风险节点。

基于风险势能场的韧性任务迁移算法分为两个步骤：（1）基于风险势能场的路径规划；（2）基于韧性适配度的任务分配。

#### （1）基于风险势能场的路径规划

为在路径规划中内嵌风险规避机制，本文引入物理场论思想，将多重网络拓扑映射为三维势能地形：节点失效概率对应地形高度，高风险节点形成高势能障碍，低风险节点形成低势能通道。在此模型下，任务迁移路径的搜索过程等价于在势能场中寻找能量消耗最小的流线，自然实现对高危节点的规避。

**定义 3.13. 节点风险势能**：节点 $a_i$ 的风险势能 $U_i(\tau)$ 定义为其综合失效概率的非线性映射：

$$U_i(\tau) = \frac{1}{\left(\max\left(\epsilon, 1 - p_i^{fail}(\tau)\right)\right)^\gamma} \tag{3-11}$$

式中，$p_i^{fail}(\tau)$ 为节点 $a_i$ 的综合失效概率；$\gamma > 0$ 为风险敏感指数，控制势能场的陡峭程度，$\gamma$ 越大，高危节点的势能壁垒效应越显著；$\epsilon > 0$ 为数值稳定常数。该定义确保了当节点濒临失效（$p_i^{fail} \to 1$）时，其势能趋于无穷大，从而在逻辑上阻断经过该节点的路径。

基于节点风险势能，本文将风险因素融入路径代价的计算，定义风险势能距离，使路径规划在优化迁移代价的同时自动规避高危节点。

**定义 3.14. 风险势能距离**：多重网络中节点 $a_u$ 到节点 $a_v$ 的风险势能距离 $RPD(u, v, \tau)$ 定义为：

$$RPD(u, v, \tau) = \min_{path \in \mathcal{P}(u,v)} \sum_{(a_i, a_j) \in path} w_{ij}^{RPD}(\tau) \tag{3-12}$$

其中，边风险势能权重 $w_{ij}^{RPD}(\tau)$ 定义为原始迁移代价与目标节点风险势能的乘积：

$$w_{ij}^{RPD}(\tau) = \omega_{ij}(\tau) \cdot U_j(\tau) = \frac{\omega_{ij}(\tau)}{\left(\max\left(\epsilon, 1 - p_j^{fail}(\tau)\right)\right)^\gamma} \tag{3-13}$$

式中，$\mathcal{P}(u,v)$ 为节点 $a_u$ 到节点 $a_v$ 的所有可行路径集合；$\omega_{ij}(\tau)$ 为边 $(a_i, a_j)$ 的原始迁移代价。

基于风险势能场的路径规划具体流程如算法 3-2 所示。

------

**算法 3-2**：$Risk\ Potential\ Field\ based\ Path\ Planning\ (RPF$-$PP)$

------

**输入**：重构后网络 $\mathcal{G}_{rec}$，存活节点集合 $\mathcal{A}^{surv}(\tau)$，源节点集合 $\mathcal{A}^{src}$，参数 $\gamma$，$\epsilon$

**输出**：风险势能距离矩阵 $\mathbf{D}^{RPD}$

------

1. // 构建风险势能场
2. **for each** surviving node $a_i \in \mathcal{A}^{surv}(\tau)$ **do**
3. $\quad$ $p_i^{fail}(\tau) \leftarrow$ CalculateFailureProbability$(a_i, \tau)$
4. $\quad$ $U_i(\tau) \leftarrow \frac{1}{(\max(\epsilon, 1 - p_i^{fail}(\tau)))^\gamma}$
5. **end for**
6. // 构建风险势能权重矩阵
7. **for each** edge $(a_i, a_j) \in \mathcal{E}_{rec}$ **do**
8. $\quad$ $w_{ij}^{RPD} \leftarrow \omega_{ij} \cdot U_j(\tau)$
9. **end for**
10. // 计算风险势能距离
11. **for each** source node $a_u \in \mathcal{A}^{src}$ **do**
12. $\quad$ $\mathbf{D}^{RPD}[u, :] \leftarrow$ Dijkstra$(\mathcal{G}_{rec}, a_u, \{w_{ij}^{RPD}\})$
13. **end for**
14. **return** $\mathbf{D}^{RPD}$

------

#### （2）基于韧性适配度的任务分配

获得风险势能距离后，需为中断任务匹配最优执行节点。任务分配是一个多目标优化问题，需平衡角色适配度、节点存活率、路径风险及负载均衡。本文提出韧性适配度函数，在统一框架下实现上述目标的联合优化。

**定义 3.15. 韧性适配度函数**：对于任务 $\tau_k$ 与候选执行节点 $a_i$，韧性适配度函数 $F_{i,k}^{res}(\tau)$ 定义为：

$$F_{i,k}^{res}(\tau) = \alpha_1 \cdot \Phi(\rho_i, \tau_k) + \alpha_2 \cdot (1 - p_i^{fail}(\tau)) - \alpha_3 \cdot \frac{RPD(loc(\tau_k), i, \tau)}{RPD_{max}} - \alpha_4 \cdot \frac{L_i(\tau) + q_k}{L_{max}} \tag{3-14}$$

式中，$\Phi(\rho_i, \tau_k)$ 为角色-任务适配度；$(1 - p_i^{fail}(\tau))$ 为节点存活率；第三项为归一化路径风险，$loc(\tau_k)$ 为任务当前位置，$RPD_{max}$ 为归一化基准；第四项为预测负载率，其中 $(L_i(\tau) + q_k)$ 计入了任务分配后的新增负载。预测负载机制体现了决策的前瞻性，可有效防止因贪心分配导致的目标节点次生过载。$\alpha_1 \sim \alpha_4$ 为权重系数，满足 $\sum \alpha_j = 1$。

对于每个任务 $\tau_k$，算法从满足约束条件的候选节点中选择韧性适配度最大的节点作为目标执行者：

$$a_i^* = \underset{a_i \in \mathcal{A}^{cand}(\tau_k)}{\arg\max} \ F_{i,k}^{res}(\tau) \tag{3-17}$$

基于韧性适配度的任务分配具体流程如算法 3-3 所示。

------

**算法 3-3**：$Task\ Allocation\ based\ on\ Resilient\ Fitness\ (TA$-$RF)$

------

**输入**：中断任务集合 $\mathcal{T}^{int}$，存活节点集合 $\mathcal{A}^{surv}$，风险势能距离矩阵 $\mathbf{D}^{RPD}$，参数 $\alpha_1, \alpha_2, \alpha_3, \alpha_4$，$\eta_\Phi$，$L_{crit}$

**输出**：任务迁移方案 $\sigma$

------

1. **Initialize**: $\sigma \leftarrow \emptyset$
2. $\mathcal{Q}^{task} \leftarrow$ Sort $\mathcal{T}^{int}$ by Priority in descending order
3. // 贪心分配任务
4. **for each** task $\tau_k \in \mathcal{Q}^{task}$ **do**
5. $\quad$ // 构建满足约束的候选节点集合
6. $\quad$ $\mathcal{A}^{cand}(\tau_k) \leftarrow \{a_i \in \mathcal{A}^{surv} \mid s_i^{func} = 1 \wedge \Phi(\rho_i, \tau_k) \geq \eta_\Phi \wedge L_i + q_k \leq L_{crit}\}$
7. $\quad$ **if** $\mathcal{A}^{cand}(\tau_k) = \emptyset$ **then**
8. $\quad\quad$ MarkAsUnassignable$(\tau_k)$
9. $\quad\quad$ **continue**
10. $\quad$ **end if**
11. $\quad$ // 计算各候选节点的韧性适配度
12. $\quad$ **for each** candidate $a_i \in \mathcal{A}^{cand}(\tau_k)$ **do**
13. $\quad\quad$ $F_{i,k}^{res} \leftarrow \alpha_1 \cdot \Phi(\rho_i, \tau_k) + \alpha_2 \cdot (1 - p_i^{fail})$
14. $\quad\quad\quad\quad\quad - \alpha_3 \cdot \frac{\mathbf{D}^{RPD}[loc(\tau_k), i]}{RPD_{max}} - \alpha_4 \cdot \frac{L_i + q_k}{L_{max}}$
15. $\quad$ **end for**
16. $\quad$ // 选择韧性适配度最大的节点
17. $\quad$ $a_i^* \leftarrow \arg\max_{a_i \in \mathcal{A}^{cand}(\tau_k)} F_{i,k}^{res}$
18. $\quad$ $\sigma \leftarrow \sigma \cup \{(\tau_k, a_i^*)\}$
19. $\quad$ $L_{i^*} \leftarrow L_{i^*} + q_k$ // 更新目标节点负载
20. **end for**
21. **return** $\sigma$

------

